# AMax (DELILA Custom Firmware) Configuration File
# For use with V2730 digitizers running DELILA firmware

# Connection settings
URL dig2://172.18.4.56
Threads 4
ModID 3

# Firmware type (optional - will be auto-detected)
# FirmwareType AMAX

# ============================================================================
# Standard CAEN Parameters (using /par/ and /ch/ paths)
# ============================================================================
# These parameters control the hardware directly via standard CAEN commands

# Global acquisition parameters
/par/AcqTriggerSource SwTrg
/par/StartSource SWcmd
/par/GPIOMode Run
/par/ClockSource Internal
/par/EnClockOutFP True
/par/EnDataReduction False

# Test pulse configuration (if needed for testing)
# /par/TestPulsePeriod 1000
# /par/TestPulseWidth 16

# Channel configuration (hardware settings)
/ch/0..31/par/ChEnable True
/ch/0..31/par/DCOffset 50.0
/ch/0..31/par/SignalOffset 0
/ch/0..31/par/ChGain 0
/ch/0..31/par/WaveDataSource ADC_DATA
/ch/0..31/par/ITLConnect Disabled

# ============================================================================
# DELILA Custom Registers (using /reg/ paths)
# ============================================================================
# These registers control the custom DELILA firmware signal processing

# Core control registers
/reg/hooold 5000           # Hold-off time
/reg/M_lenght 5            # Moving average length (note: original spelling)
/reg/ft_delay 720          # Fast trigger delay
/reg/ft_hold 1             # Fast trigger hold
/reg/en_shift 0            # Enable shift
/reg/en_out_h 0            # Enable output high
/reg/en_shift_in 0         # Enable shift input
/reg/GAIN 1050             # Digital gain

# System control registers
/reg/reg_en 4              # Register enable
/reg/reg_amax 4            # AMax register control

# CFD parameters (Constant Fraction Discriminator)
/reg/delay_in 32           # CFD delay input
/reg/fract_in 25000        # CFD fraction input
/reg/thrcfd 50             # CFD threshold
/reg/delay_trigger 96      # CFD trigger delay
/reg/baseline_len 6        # CFD baseline length

# Energy parameters
/reg/sub1_len 2            # Sub-window 1 length
/reg/sub1_delay 570        # Sub-window 1 delay
/reg/sub2_delay 670        # Sub-window 2 delay
/reg/mult 3800000          # Multiplication factor

# AMax amplitude parameters
/reg/shapung_len 6         # Shaping length (note: original spelling)
/reg/Window_MAXIM 1000     # Maximum window
/reg/DELAY_AM 100          # Amplitude delay
/reg/AMAX_WINDOW 1000      # AMax window
/reg/offsett 1000          # Offset (note: original spelling)

# ============================================================================
# Alternative formats (all supported)
# ============================================================================

# Using hex addresses directly (without names)
# /reg/0x0000 5000         # hooold
# /reg/0x0007 1050         # GAIN
# /reg/0x8000F 32          # delay_in
# /reg/0xE000C 2           # sub1_len

# Direct hex addresses (without /reg/ prefix)
# 0x0000 5000              # hooold
# 0xE0020 4                # reg_en
# 0x8000F 32               # delay_in