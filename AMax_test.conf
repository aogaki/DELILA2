# AMax Configuration File - Matching main.c from OldAMax test
# This configuration replicates the setup in:
# PreSearch/AMax/OldAMax/caen-felib-demo-open-dpp/main.c

# Connection settings (update with your actual device)
URL dig2://172.18.4.56
Threads 3
ModID 0
Debug true

# ============================================================================
# Standard CAEN Parameters (matching main.c)
# ============================================================================

# Channel configuration - Enable all 32 channels with 50% DC offset
/ch/0..31/par/ChEnable true
/ch/0..31/par/DCOffset 50

# Global trigger configuration - Software trigger with test pulse
/par/ITLAMainLogic OR
#/par/AcqTriggerSource SwTrg | TestPulse
/par/AcqTriggerSource ITLA
/par/TestPulsePeriod 1000
/par/TestPulseWidth 16

# ============================================================================
# Note: User registers are commented out in main.c
# ============================================================================
# The following register settings were found commented in main.c:
# These would set channel trigger sources and wavelength if enabled:
#
# Channel trigger sources (addresses 0x600 + 4*i, value 8):
# /reg/0x600 8    # Channel 0
# /reg/0x604 8    # Channel 1
# ... (continuing for all 32 channels)
#
# Wavelength for channel 0:
# /reg/0x300 1000
#
# Since these are commented in the original code, they are not active here.

# ============================================================================
# DELILA Custom Registers (from values_final.txt)
# ============================================================================
# These register settings match PreSearch/AMax/DELILA_impl/values_final.txt
# Register names match RegisterFile.json exactly, including original spelling
# (M_lenght, shapung_len, offsett, etc.)

# Core control registers (addresses 0x0000-0x0007)
# /reg/en_out_h 0            # Address 0x0005 - Enable output high
# /reg/en_shift 0            # Address 0x0004 - Enable shift
# /reg/M_lenght 5            # Address 0x0001 - Moving average length (original spelling)
# /reg/hooold 5000           # Address 0x0000 - Hold-off time
# /reg/GAIN 1050             # Address 0x0007 - Digital gain
# /reg/en_shift_in 0         # Address 0x0006 - Enable shift input
# /reg/ft_delay 720          # Address 0x0002 - Fast trigger delay
# /reg/ft_hold 1             # Address 0x0003 - Fast trigger hold

# System control registers (addresses 0xE0020-0xE0021)
# /reg/reg_en 4              # Address 0xE0020 - Register enable
# /reg/reg_amax 4            # Address 0xE0021 - AMax register control

# CFD parameters (Constant Fraction Discriminator) (addresses 0x8000F-0x80013)
# /reg/delay_in 32           # Address 0x8000F - CFD delay input
# /reg/fract_in 25000        # Address 0x80010 - CFD fraction input
# /reg/thrcfd 50             # Address 0x80011 - CFD threshold
# /reg/delay_trigger 96      # Address 0x80012 - CFD trigger delay
# /reg/baseline_len 6        # Address 0x80013 - CFD baseline length

# Energy parameters (addresses 0xE000C-0xE000F)
# /reg/sub1_len 2            # Address 0xE000C - Sub-window 1 length
# /reg/sub1_delay 570        # Address 0xE000D - Sub-window 1 delay
# /reg/sub2_delay 670        # Address 0xE000E - Sub-window 2 delay
# /reg/mult 3800000          # Address 0xE000F - Multiplication factor

# AMax amplitude parameters (addresses 0xE001B-0xE001F)
# /reg/shapung_len 6         # Address 0xE001B - Shaping length (original spelling)
# /reg/Window_MAXIM 1000     # Address 0xE001C - Maximum window
# /reg/DELAY_AM 100          # Address 0xE001D - Amplitude delay
# /reg/AMAX_WINDOW 1000      # Address 0xE001E - AMax window
# /reg/offsett 1000          # Address 0xE001F - Offset (original spelling)